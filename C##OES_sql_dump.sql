/*
 Navicat Premium Data Transfer

 Source Server         : oracle2
 Source Server Type    : Oracle
 Source Server Version : 190000
 Source Host           : localhost:1521
 Source Schema         : C##OES

 Target Server Type    : Oracle
 Target Server Version : 190000
 File Encoding         : 65001

 Date: 23/02/2022 15:33:28
*/


-- ----------------------------
-- Table structure for ACTIVE_USER_INFO
-- ----------------------------
DROP TABLE "C##OES"."ACTIVE_USER_INFO";
CREATE TABLE "C##OES"."ACTIVE_USER_INFO" (
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE,
  "TOKEN" VARCHAR2(64 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of ACTIVE_USER_INFO
-- ----------------------------
INSERT INTO "C##OES"."ACTIVE_USER_INFO" VALUES ('a6cd1599-b248-463f-b7e7-1adabc147ed2', '0952151a-8a4e-452c-b7af-13cb6656d990');

-- ----------------------------
-- Table structure for ANSWER_SCRIPT
-- ----------------------------
DROP TABLE "C##OES"."ANSWER_SCRIPT";
CREATE TABLE "C##OES"."ANSWER_SCRIPT" (
  "EXAM_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "ANSWERS" VARCHAR2(2048 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of ANSWER_SCRIPT
-- ----------------------------
INSERT INTO "C##OES"."ANSWER_SCRIPT" VALUES ('ccfc1f66-908c-47be-adfc-d6e503328e55', 'd3ba38bd-9549-473e-8366-ad690b3b1bd7', '[{"questionId":"07b8e7f5-e84c-4a1e-b390-2c212b77ee4f","answer":4},{"questionId":"8a1703a3-4951-4178-95b4-5e7a71340aa7","answer":3},{"questionId":"eb0d2c6e-8e79-4c2d-8b96-536963d8c0d6","answer":2}]');

-- ----------------------------
-- Table structure for COURSES
-- ----------------------------
DROP TABLE "C##OES"."COURSES";
CREATE TABLE "C##OES"."COURSES" (
  "COURSE_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "COURSE_NAME" VARCHAR2(64 BYTE) VISIBLE,
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of COURSES
-- ----------------------------
INSERT INTO "C##OES"."COURSES" VALUES ('7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'physics', 'a6cd1599-b248-463f-b7e7-1adabc147ed2');

-- ----------------------------
-- Table structure for EXAMS
-- ----------------------------
DROP TABLE "C##OES"."EXAMS";
CREATE TABLE "C##OES"."EXAMS" (
  "EXAM_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "START_TIME" DATE VISIBLE DEFAULT TO_DATE('0001-01-01:00-00-00','YYYY-MM-DD:HH24-MI-SS') NOT NULL,
  "END_TIME" DATE VISIBLE DEFAULT TO_DATE('0001-01-01:00-00-00','YYYY-MM-DD:HH24-MI-SS') NOT NULL,
  "COURSE_ID" VARCHAR2(64 BYTE) VISIBLE,
  "EXAM_NAME" VARCHAR2(128 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of EXAMS
-- ----------------------------
INSERT INTO "C##OES"."EXAMS" VALUES ('ccfc1f66-908c-47be-adfc-d6e503328e55', TO_DATE('2022-02-22 20:00:00', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-24 20:00:00', 'SYYYY-MM-DD HH24:MI:SS'), '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Test exam 2');
INSERT INTO "C##OES"."EXAMS" VALUES ('b2adc437-c642-4bc8-8e87-cba5e6aa8e92', TO_DATE('2022-02-24 10:00:00', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-24 11:00:00', 'SYYYY-MM-DD HH24:MI:SS'), '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'testExam1');

-- ----------------------------
-- Table structure for MESSAGES
-- ----------------------------
DROP TABLE "C##OES"."MESSAGES";
CREATE TABLE "C##OES"."MESSAGES" (
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "COURSE_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "MESSAGE" VARCHAR2(512 BYTE) VISIBLE NOT NULL,
  "MESSAGE_ID" NUMBER VISIBLE DEFAULT "C##OES"."ISEQ$$_77799".nextval NOT NULL,
  "SENT_TIME" DATE VISIBLE DEFAULT TO_DATE('0001-01-01:00-00-00','YYYY-MM-DD:HH24-MI-SS') NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of MESSAGES
-- ----------------------------
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'I love physics, Its so beautiful', '1', TO_DATE('2022-02-18 12:14:10', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'But my true love is Math,Only truth in the universe', '2', TO_DATE('2022-02-18 15:21:22', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'But the sad truth i dont understand anything about math', '3', TO_DATE('2022-02-18 15:22:03', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'What are numbers?!!!!!!!', '4', TO_DATE('2022-02-18 15:22:22', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'I feel like i understand them,but as i look closely it feels like my understanding is nothing but void', '5', TO_DATE('2022-02-18 15:23:21', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Its like being able to see something but unable to touch it or feel it in any way', '6', TO_DATE('2022-02-18 15:26:08', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'When you look closely everything in reality feels like this', '7', TO_DATE('2022-02-18 15:27:24', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Do i understand what a table is?Or a chair?', '8', TO_DATE('2022-02-18 15:27:52', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'They are defined in terms of another terms', '9', TO_DATE('2022-02-18 15:28:46', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'If we follow these definition tree then what will we find?', '10', TO_DATE('2022-02-18 15:29:19', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'They are either circular definition which is horrible for my mind', '11', TO_DATE('2022-02-18 15:29:44', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Or they end in void which is also horrible', '12', TO_DATE('2022-02-18 15:30:19', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Or they continue infinitely(most unlikely) which is terrible!!!!', '13', TO_DATE('2022-02-18 15:31:04', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Lets try to define table', '14', TO_DATE('2022-02-18 15:33:12', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Its a geometric structure made of some materials', '15', TO_DATE('2022-02-18 15:34:04', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Can you define a 2d space?', '16', TO_DATE('2022-02-18 15:35:10', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Lets say its a infinite set of pair of numbers', '17', TO_DATE('2022-02-18 15:35:50', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'But our feelings of 2d space is so different from when we think about a infinite set of number', '18', TO_DATE('2022-02-18 15:39:04', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'we have a mental image of 2d space', '19', TO_DATE('2022-02-18 15:41:12', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'How can we create a program which can do the same', '20', TO_DATE('2022-02-18 15:41:35', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "C##OES"."MESSAGES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'Feel 2d space as we feel', '21', TO_DATE('2022-02-18 15:41:52', 'SYYYY-MM-DD HH24:MI:SS'));

-- ----------------------------
-- Table structure for NOTIFICATIONS
-- ----------------------------
DROP TABLE "C##OES"."NOTIFICATIONS";
CREATE TABLE "C##OES"."NOTIFICATIONS" (
  "NOTIFICATION_ID" NUMBER VISIBLE DEFAULT "C##OES"."ISEQ$$_78192".nextval NOT NULL,
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE,
  "COURSE_ID" VARCHAR2(64 BYTE) VISIBLE,
  "MESSAGE" VARCHAR2(256 BYTE) VISIBLE NOT NULL,
  "READ_STATUS" NUMBER VISIBLE DEFAULT 0
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of NOTIFICATIONS
-- ----------------------------
INSERT INTO "C##OES"."NOTIFICATIONS" VALUES ('21', 'd3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'New exam posted on physics Start time: 2022-02-22:20-00-00 End time: 2022-02-24:20-00-00', '0');
INSERT INTO "C##OES"."NOTIFICATIONS" VALUES ('1', 'd3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac', 'New exam posted on physics Start time: 2022-02-24:10-00-00 End time: 2022-02-24:11-00-00', '1');

-- ----------------------------
-- Table structure for QUESTIONS
-- ----------------------------
DROP TABLE "C##OES"."QUESTIONS";
CREATE TABLE "C##OES"."QUESTIONS" (
  "QUESTION_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "DESCRIPTION" VARCHAR2(1024 BYTE) VISIBLE NOT NULL,
  "OPTION1" VARCHAR2(256 BYTE) VISIBLE NOT NULL,
  "OPTION2" VARCHAR2(256 BYTE) VISIBLE NOT NULL,
  "OPTION3" VARCHAR2(256 BYTE) VISIBLE NOT NULL,
  "OPTION4" VARCHAR2(256 BYTE) VISIBLE NOT NULL,
  "RIGHT_OPTION" NUMBER VISIBLE NOT NULL,
  "MARK" NUMBER VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of QUESTIONS
-- ----------------------------
INSERT INTO "C##OES"."QUESTIONS" VALUES ('eb0d2c6e-8e79-4c2d-8b96-536963d8c0d6', 'How big is betelgeuse?', 'smaller than the sun', 'bigger than the orbit of mars if it placed at the center of solar system', 'smaller than venus''s orbit', 'bigger than entire solar system', '2', '1', 'a6cd1599-b248-463f-b7e7-1adabc147ed2');
INSERT INTO "C##OES"."QUESTIONS" VALUES ('8a1703a3-4951-4178-95b4-5e7a71340aa7', 'What will happen if betelgeuse goes supernova?', 'We are gonna eat popcorn and watch it goes supernova', 'its gonna kill everything on earth', 'Its not gonna kill everything on earth and we will have a great supernova to study', 'All planet around betelgeuse going to be destroyed', '3', '1', 'a6cd1599-b248-463f-b7e7-1adabc147ed2');
INSERT INTO "C##OES"."QUESTIONS" VALUES ('07b8e7f5-e84c-4a1e-b390-2c212b77ee4f', 'What is the mass of the sun?', 'Really lot', 'lot more than the earth', 'none but god knows', 'definitely smaller than betelgeuse', '4', '1', 'a6cd1599-b248-463f-b7e7-1adabc147ed2');

-- ----------------------------
-- Table structure for QUESTION_PAPER
-- ----------------------------
DROP TABLE "C##OES"."QUESTION_PAPER";
CREATE TABLE "C##OES"."QUESTION_PAPER" (
  "EXAM_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "QUESTION_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of QUESTION_PAPER
-- ----------------------------
INSERT INTO "C##OES"."QUESTION_PAPER" VALUES ('b2adc437-c642-4bc8-8e87-cba5e6aa8e92', '07b8e7f5-e84c-4a1e-b390-2c212b77ee4f');
INSERT INTO "C##OES"."QUESTION_PAPER" VALUES ('b2adc437-c642-4bc8-8e87-cba5e6aa8e92', '8a1703a3-4951-4178-95b4-5e7a71340aa7');
INSERT INTO "C##OES"."QUESTION_PAPER" VALUES ('b2adc437-c642-4bc8-8e87-cba5e6aa8e92', 'eb0d2c6e-8e79-4c2d-8b96-536963d8c0d6');
INSERT INTO "C##OES"."QUESTION_PAPER" VALUES ('ccfc1f66-908c-47be-adfc-d6e503328e55', '07b8e7f5-e84c-4a1e-b390-2c212b77ee4f');
INSERT INTO "C##OES"."QUESTION_PAPER" VALUES ('ccfc1f66-908c-47be-adfc-d6e503328e55', '8a1703a3-4951-4178-95b4-5e7a71340aa7');
INSERT INTO "C##OES"."QUESTION_PAPER" VALUES ('ccfc1f66-908c-47be-adfc-d6e503328e55', 'eb0d2c6e-8e79-4c2d-8b96-536963d8c0d6');

-- ----------------------------
-- Table structure for RESULT
-- ----------------------------
DROP TABLE "C##OES"."RESULT";
CREATE TABLE "C##OES"."RESULT" (
  "EXAM_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "SCORE" NUMBER VISIBLE DEFAULT 0
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of RESULT
-- ----------------------------
INSERT INTO "C##OES"."RESULT" VALUES ('ccfc1f66-908c-47be-adfc-d6e503328e55', 'd3ba38bd-9549-473e-8366-ad690b3b1bd7', '3');

-- ----------------------------
-- Table structure for STUDENT_TAKES
-- ----------------------------
DROP TABLE "C##OES"."STUDENT_TAKES";
CREATE TABLE "C##OES"."STUDENT_TAKES" (
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "COURSE_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of STUDENT_TAKES
-- ----------------------------
INSERT INTO "C##OES"."STUDENT_TAKES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', '7e70deec-30f5-4eb9-b511-feae2f6b95ac');

-- ----------------------------
-- Table structure for USER_OES
-- ----------------------------
DROP TABLE "C##OES"."USER_OES";
CREATE TABLE "C##OES"."USER_OES" (
  "USER_ID" VARCHAR2(64 BYTE) VISIBLE NOT NULL,
  "FIRST_NAME" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "LAST_NAME" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "EMAIL" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "PASSWORD" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "BIRTH_DATE" DATE VISIBLE NOT NULL,
  "ROLE" VARCHAR2(10 BYTE) VISIBLE NOT NULL,
  "PHN_NUMBER" VARCHAR2(16 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of USER_OES
-- ----------------------------
INSERT INTO "C##OES"."USER_OES" VALUES ('a6cd1599-b248-463f-b7e7-1adabc147ed2', 'Hasanul', 'Islam', 'hasan833333334@gmail.com', 'hlwWeb', TO_DATE('1999-01-20 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), 'teacher', '01793957704');
INSERT INTO "C##OES"."USER_OES" VALUES ('f8a9ae4b-0fc7-4e10-af33-94bd7008beaf', 'Hasanul', 'Islam', 'hasan112358132133@gmail.com', 'hlwWeb2', TO_DATE('1999-01-20 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), 'teacher', '01793957704');
INSERT INTO "C##OES"."USER_OES" VALUES ('d3ba38bd-9549-473e-8366-ad690b3b1bd7', 'nayeem', 'Islam', 'nayeem32@gmail.com', 'hlwb343', TO_DATE('1999-01-20 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), 'student', '01793934370');
INSERT INTO "C##OES"."USER_OES" VALUES ('3f2f54ad-44ff-4c4e-80c3-38b0eb80c8d8', 'Hasanul', 'Islam', 'hasan112358132134233@gmail.com', 'hlwWeb2343', TO_DATE('1999-01-20 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), 'teacher', '01793957704');

-- ----------------------------
-- Sequence structure for ISEQ$$_77799
-- ----------------------------
DROP SEQUENCE "C##OES"."ISEQ$$_77799";
CREATE SEQUENCE "C##OES"."ISEQ$$_77799" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_78192
-- ----------------------------
DROP SEQUENCE "C##OES"."ISEQ$$_78192";
CREATE SEQUENCE "C##OES"."ISEQ$$_78192" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Primary Key structure for table ACTIVE_USER_INFO
-- ----------------------------
ALTER TABLE "C##OES"."ACTIVE_USER_INFO" ADD CONSTRAINT "SYS_C007839" PRIMARY KEY ("TOKEN");

-- ----------------------------
-- Uniques structure for table ACTIVE_USER_INFO
-- ----------------------------
ALTER TABLE "C##OES"."ACTIVE_USER_INFO" ADD CONSTRAINT "AUI_UID_UNQ" UNIQUE ("USER_ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table ANSWER_SCRIPT
-- ----------------------------
ALTER TABLE "C##OES"."ANSWER_SCRIPT" ADD CONSTRAINT "SYS_C007944" PRIMARY KEY ("EXAM_ID", "USER_ID");

-- ----------------------------
-- Checks structure for table ANSWER_SCRIPT
-- ----------------------------
ALTER TABLE "C##OES"."ANSWER_SCRIPT" ADD CONSTRAINT "SYS_C007943" CHECK ("ANSWERS" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table COURSES
-- ----------------------------
ALTER TABLE "C##OES"."COURSES" ADD CONSTRAINT "SYS_C007842" PRIMARY KEY ("COURSE_ID");

-- ----------------------------
-- Primary Key structure for table EXAMS
-- ----------------------------
ALTER TABLE "C##OES"."EXAMS" ADD CONSTRAINT "SYS_C007918" PRIMARY KEY ("EXAM_ID");

-- ----------------------------
-- Checks structure for table EXAMS
-- ----------------------------
ALTER TABLE "C##OES"."EXAMS" ADD CONSTRAINT "SYS_C007915" CHECK ("START_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."EXAMS" ADD CONSTRAINT "SYS_C007916" CHECK ("END_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."EXAMS" ADD CONSTRAINT "SYS_C007917" CHECK ("EXAM_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table EXAMS
-- ----------------------------
CREATE TRIGGER "C##OES"."NOTIFICATION_TRIGGER" AFTER INSERT ON "C##OES"."EXAMS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE
    T_EXAM_ID     VARCHAR2(64);
    T_START_TIME  DATE;
    T_END_TIME    DATE;
    T_COURSE_ID   VARCHAR2(64);
    T_EXAM_NAME   VARCHAR2(128);

    T_MESSAGE     VARCHAR2(256);
    T_COURSE_NAME VARCHAR2(64);
BEGIN
	T_EXAM_ID := :NEW.EXAM_ID;
	T_START_TIME := :NEW.START_TIME;
	T_END_TIME := :NEW.END_TIME;
	T_COURSE_ID := :NEW.COURSE_ID;
	T_EXAM_NAME := :NEW.EXAM_NAME;

	SELECT CRS.COURSE_NAME INTO T_COURSE_NAME
		FROM C##OES.COURSES CRS
		WHERE CRS.COURSE_ID = T_COURSE_ID;
	T_MESSAGE := 'New exam posted on '||T_COURSE_NAME||' Start time: '||TO_CHAR(T_START_TIME,'YYYY-MM-DD:HH24-MI-SS')||' End time: '||TO_CHAR(T_END_TIME,'YYYY-MM-DD:HH24-MI-SS');

	FOR T_ROW IN (SELECT USER_ID FROM C##OES.STUDENT_TAKES ST WHERE ST.COURSE_ID = T_COURSE_ID)
	LOOP
		INSERT INTO C##OES.NOTIFICATIONS (USER_ID,MESSAGE,COURSE_ID) VALUES(T_ROW.USER_ID,T_MESSAGE,T_COURSE_ID);
	END LOOP;
END;
/

-- ----------------------------
-- Primary Key structure for table MESSAGES
-- ----------------------------
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "SYS_C007884" PRIMARY KEY ("MESSAGE_ID");

-- ----------------------------
-- Checks structure for table MESSAGES
-- ----------------------------
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "SYS_C007879" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "SYS_C007880" CHECK ("COURSE_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "SYS_C007881" CHECK ("MESSAGE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "SYS_C007882" CHECK ("MESSAGE_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "SYS_C007883" CHECK ("SENT_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table NOTIFICATIONS
-- ----------------------------
ALTER TABLE "C##OES"."NOTIFICATIONS" ADD CONSTRAINT "SYS_C007922" PRIMARY KEY ("NOTIFICATION_ID");

-- ----------------------------
-- Checks structure for table NOTIFICATIONS
-- ----------------------------
ALTER TABLE "C##OES"."NOTIFICATIONS" ADD CONSTRAINT "SYS_C007920" CHECK ("NOTIFICATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."NOTIFICATIONS" ADD CONSTRAINT "SYS_C007921" CHECK ("MESSAGE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table QUESTIONS
-- ----------------------------
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007911" PRIMARY KEY ("QUESTION_ID");

-- ----------------------------
-- Checks structure for table QUESTIONS
-- ----------------------------
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007903" CHECK ("DESCRIPTION" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007904" CHECK ("OPTION1" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007905" CHECK ("OPTION2" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007906" CHECK ("OPTION3" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007907" CHECK ("OPTION4" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007908" CHECK ("RIGHT_OPTION" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007909" CHECK ("MARK" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "SYS_C007910" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table QUESTION_PAPER
-- ----------------------------
ALTER TABLE "C##OES"."QUESTION_PAPER" ADD CONSTRAINT "SYS_C007929" PRIMARY KEY ("EXAM_ID", "QUESTION_ID");

-- ----------------------------
-- Primary Key structure for table RESULT
-- ----------------------------
ALTER TABLE "C##OES"."RESULT" ADD CONSTRAINT "SYS_C007947" PRIMARY KEY ("EXAM_ID", "USER_ID");

-- ----------------------------
-- Primary Key structure for table STUDENT_TAKES
-- ----------------------------
ALTER TABLE "C##OES"."STUDENT_TAKES" ADD CONSTRAINT "STUDENT_TAKES_PK" PRIMARY KEY ("USER_ID", "COURSE_ID");

-- ----------------------------
-- Primary Key structure for table USER_OES
-- ----------------------------
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007814" PRIMARY KEY ("USER_ID");

-- ----------------------------
-- Uniques structure for table USER_OES
-- ----------------------------
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007815" UNIQUE ("EMAIL") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007816" UNIQUE ("PASSWORD") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Checks structure for table USER_OES
-- ----------------------------
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007808" CHECK ("FIRST_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007809" CHECK ("LAST_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007810" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007811" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007812" CHECK ("BIRTH_DATE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."USER_OES" ADD CONSTRAINT "SYS_C007813" CHECK ("ROLE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table ACTIVE_USER_INFO
-- ----------------------------
ALTER TABLE "C##OES"."ACTIVE_USER_INFO" ADD CONSTRAINT "USER_ID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table ANSWER_SCRIPT
-- ----------------------------
ALTER TABLE "C##OES"."ANSWER_SCRIPT" ADD CONSTRAINT "AS_EID_FK" FOREIGN KEY ("EXAM_ID") REFERENCES "C##OES"."EXAMS" ("EXAM_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."ANSWER_SCRIPT" ADD CONSTRAINT "AS_UID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table COURSES
-- ----------------------------
ALTER TABLE "C##OES"."COURSES" ADD CONSTRAINT "COURSES_USER_ID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table EXAMS
-- ----------------------------
ALTER TABLE "C##OES"."EXAMS" ADD CONSTRAINT "EX_CID_FK" FOREIGN KEY ("COURSE_ID") REFERENCES "C##OES"."COURSES" ("COURSE_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table MESSAGES
-- ----------------------------
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "MSG_CID_FK" FOREIGN KEY ("COURSE_ID") REFERENCES "C##OES"."COURSES" ("COURSE_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."MESSAGES" ADD CONSTRAINT "MSG_UID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table NOTIFICATIONS
-- ----------------------------
ALTER TABLE "C##OES"."NOTIFICATIONS" ADD CONSTRAINT "N_CID_FK" FOREIGN KEY ("COURSE_ID") REFERENCES "C##OES"."COURSES" ("COURSE_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."NOTIFICATIONS" ADD CONSTRAINT "N_UID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table QUESTIONS
-- ----------------------------
ALTER TABLE "C##OES"."QUESTIONS" ADD CONSTRAINT "Q_UID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table QUESTION_PAPER
-- ----------------------------
ALTER TABLE "C##OES"."QUESTION_PAPER" ADD CONSTRAINT "QP_EID_FK" FOREIGN KEY ("EXAM_ID") REFERENCES "C##OES"."EXAMS" ("EXAM_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."QUESTION_PAPER" ADD CONSTRAINT "QP_QID_FK" FOREIGN KEY ("QUESTION_ID") REFERENCES "C##OES"."QUESTIONS" ("QUESTION_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table RESULT
-- ----------------------------
ALTER TABLE "C##OES"."RESULT" ADD CONSTRAINT "RS_EID_FK" FOREIGN KEY ("EXAM_ID") REFERENCES "C##OES"."EXAMS" ("EXAM_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."RESULT" ADD CONSTRAINT "RS_UID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table STUDENT_TAKES
-- ----------------------------
ALTER TABLE "C##OES"."STUDENT_TAKES" ADD CONSTRAINT "ST_CID_FK" FOREIGN KEY ("COURSE_ID") REFERENCES "C##OES"."COURSES" ("COURSE_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##OES"."STUDENT_TAKES" ADD CONSTRAINT "ST_UID_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##OES"."USER_OES" ("USER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
